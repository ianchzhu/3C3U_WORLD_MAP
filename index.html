<div id='select'></div>

<h1>3C3U WORLD MAP</h1>
<br>
<br>
<br>
<h2>MINECRAFT:OVERWORLD↴</h2>
<div id='pico'></div>
<h2>MINECRAFT:OVERWORLD - CAVES↴</h2>
<div id='picocave'></div>
<h2>MINECRAFT:NETHER↴</h2>
<div id='nether'></div>
<h4>COPYRIGHT©JINDATUWEN,AURORIUM</h4>

<script>
function loadHistoryOptions() {
  console.log("loadHistoryOptions function called");
  var selectContainer = document.getElementById("select");
  if (!selectContainer) {
    console.error("Select container not found");
    return;
  }

  var xhr = new XMLHttpRequest();
  xhr.open("GET", "info.json", true);
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        console.log("JSON data received");
        try {
          var data = JSON.parse(xhr.responseText);
          var history = data.history;
          console.log("History data:", history);

          var select = document.createElement("select");
          select.id = "historySelect";
          select.onchange = refreshContent;
          selectContainer.appendChild(select);

          // Add a default option
          var defaultOption = document.createElement("option");
          defaultOption.text = "选择日期";
          defaultOption.value = "";
          select.appendChild(defaultOption);

          for (var i = 0; i < history.length; i++) {
            var option = document.createElement("option");
            option.value = history[i].date;
            option.text = history[i].date;
            select.appendChild(option);
          }
          console.log("Select element created with " + history.length + " options");
        } catch (e) {
          console.error("Error parsing JSON:", e);
        }
      } else {
        console.error("Failed to load info.json. Status:", xhr.status);
      }
    }
  };
  xhr.send();
}

function refreshContent() {
  console.log("refreshContent function called");
  var select = document.getElementById("historySelect");
  var selectedDate = select.value;

  if (selectedDate) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "info.json", true);
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
        var data = JSON.parse(xhr.responseText);
        var history = data.history;

        for (var i = 0; i < history.length; i++) {
          if (selectedDate === history[i].date) {
            document.getElementById("pico").innerHTML = history[i].pico;
            document.getElementById("picocave").innerHTML = history[i].picocave;
            document.getElementById("nether").innerHTML = history[i].nether;
            console.log("Content updated for date:", selectedDate);
            break;
          }
        }
      }
    };
    xhr.send();
  }
}

alert('COPYRIGHT©JINDATUWEN,AURORIUM \n 版权©金达图文，AURORIUM \n 使用前请事先声明！！！');
console.log("Script started");
loadHistoryOptions();
</script>
